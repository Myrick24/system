# ğŸ“Š Forgot Password System - Visual Flow Diagram

## ğŸ¯ Complete User Journey

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         LOGIN SCREEN                            â”‚
â”‚                                                                 â”‚
â”‚  Email: [________________]                                      â”‚
â”‚  Password: [____________]                                       â”‚
â”‚                                                                 â”‚
â”‚                              [Forgot password?] â† CLICK HERE   â”‚
â”‚                    [Login Button]                               â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  FORGOT PASSWORD SCREEN                         â”‚
â”‚                      (Step 1 of 3)                              â”‚
â”‚                                                                 â”‚
â”‚              ğŸ” Reset Your Password                             â”‚
â”‚                                                                 â”‚
â”‚  Enter your registered mobile number                            â”‚
â”‚  We'll send you a verification code                             â”‚
â”‚                                                                 â”‚
â”‚  Mobile Number: [09____________]                                â”‚
â”‚                                                                 â”‚
â”‚         [Send Verification Code]                                â”‚
â”‚                                                                 â”‚
â”‚         System checks:                                          â”‚
â”‚         âœ“ Valid format (09XXXXXXXXX)                            â”‚
â”‚         âœ“ Mobile exists in database                             â”‚
â”‚         âœ“ Not in cooldown period                                â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
                              â†“ (OTP sent via SMS)
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  OTP VERIFICATION SCREEN                        â”‚
â”‚                      (Step 2 of 3)                              â”‚
â”‚                                                                 â”‚
â”‚              ğŸ“± Verification Code                               â”‚
â”‚                                                                 â”‚
â”‚  We sent a verification code to                                 â”‚
â”‚  +639123456789                                                  â”‚
â”‚                                                                 â”‚
â”‚  Enter OTP:                                                     â”‚
â”‚   â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”                         â”‚
â”‚   â”‚ 1 â”‚ â”‚ 2 â”‚ â”‚ 3 â”‚ â”‚ 4 â”‚ â”‚ 5 â”‚ â”‚ 6 â”‚                         â”‚
â”‚   â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜                         â”‚
â”‚                                                                 â”‚
â”‚         [Verify Code]                                           â”‚
â”‚                                                                 â”‚
â”‚  Didn't receive? Resend in 45s                                  â”‚
â”‚  (or [Resend] button when countdown ends)                       â”‚
â”‚                                                                 â”‚
â”‚  Features:                                                      â”‚
â”‚  â€¢ Auto-focus next field                                        â”‚
â”‚  â€¢ Auto-verify when complete                                    â”‚
â”‚  â€¢ Resend with 60s cooldown                                     â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
                              â†“ (OTP verified âœ“)
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  PASSWORD RESET EMAIL SENT                      â”‚
â”‚                      (Step 3 of 3)                              â”‚
â”‚                                                                 â”‚
â”‚              ğŸ”“ Create New Password                             â”‚
â”‚                                                                 â”‚
â”‚  Password reset link has been sent to:                          â”‚
â”‚  user@example.com                                               â”‚
â”‚                                                                 â”‚
â”‚  âœ… Success! Check your email inbox                             â”‚
â”‚                                                                 â”‚
â”‚  Next steps:                                                    â”‚
â”‚  1. Check your email                                            â”‚
â”‚  2. Click the reset link                                        â”‚
â”‚  3. Create a new password                                       â”‚
â”‚  4. Return here to login                                        â”‚
â”‚                                                                 â”‚
â”‚         [Return to Login]                                       â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         EMAIL INBOX                             â”‚
â”‚                                                                 â”‚
â”‚  From: Firebase (noreply@firebase.com)                          â”‚
â”‚  Subject: Reset your password                                   â”‚
â”‚                                                                 â”‚
â”‚  Click the link below to reset your password:                   â”‚
â”‚  [Reset Password Link] â† CLICK THIS                             â”‚
â”‚                                                                 â”‚
â”‚  Link expires in 1 hour                                         â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
                              â†“ (Opens Firebase reset page)
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  FIREBASE PASSWORD RESET PAGE                   â”‚
â”‚                      (Browser/Webview)                          â”‚
â”‚                                                                 â”‚
â”‚  New Password: [________________]                               â”‚
â”‚  Confirm Password: [____________]                               â”‚
â”‚                                                                 â”‚
â”‚         [Save New Password]                                     â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
                              â†“ (Password updated âœ“)
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BACK TO LOGIN SCREEN                         â”‚
â”‚                  (Email pre-filled)                             â”‚
â”‚                                                                 â”‚
â”‚  Email: [user@example.com] â† Auto-filled                        â”‚
â”‚  Password: [____________]   â† Enter new password                â”‚
â”‚                                                                 â”‚
â”‚                    [Login Button]                               â”‚
â”‚                                                                 â”‚
â”‚  âœ… Login successful with new password!                         â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Flow Diagram

```
User Input          â†’  System Validation       â†’  External Service    â†’  Result
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Mobile Number       â†’  âœ“ Format (09XXXXXXXXX)  â†’  Firebase Phone Auth â†’  OTP SMS
(09123456789)          âœ“ Exists in DB             (SMS Provider)         Sent
                       âœ“ Cooldown check
                          â†“
                    [Store: verificationId]
                          â†“
                          
OTP Code            â†’  âœ“ 6 digits              â†’  Firebase Auth       â†’  Verified
(123456)               âœ“ Match verificationId     Credential Check       Success
                          â†“
                    [Sign in temporarily]
                    [Get user email]
                          â†“
                          
Email Reset         â†’  Sign out phone session  â†’  Firebase Auth       â†’  Email
Request                Send reset email           Email Service          Sent
                          â†“
                    [Navigate to login]
                          â†“
                          
New Password        â†’  User clicks email link  â†’  Firebase Web        â†’  Password
(via email link)       Enters new password        Password Reset         Updated
```

---

## ğŸ—‚ï¸ Code Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LOGIN SCREEN (login_screen.dart)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ TextButton("Forgot password?")                         â”‚  â”‚
â”‚  â”‚   â†“                                                     â”‚  â”‚
â”‚  â”‚ Navigator.push(ForgotPasswordScreen())                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FORGOT PASSWORD SCREEN (forgot_password_screen.dart)        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1. Validate mobile number                              â”‚  â”‚
â”‚  â”‚ 2. Query Firestore: users.mobile == input              â”‚  â”‚
â”‚  â”‚ 3. Convert: +63 + mobile.substring(1)                  â”‚  â”‚
â”‚  â”‚ 4. FirebaseAuth.verifyPhoneNumber()                    â”‚  â”‚
â”‚  â”‚ 5. Navigator.push(PasswordResetOtpScreen())            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PASSWORD RESET OTP SCREEN (password_reset_otp_screen.dart)  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1. Display 6 OTP input fields                          â”‚  â”‚
â”‚  â”‚ 2. Auto-focus between fields                           â”‚  â”‚
â”‚  â”‚ 3. Create PhoneAuthCredential                          â”‚  â”‚
â”‚  â”‚ 4. FirebaseAuth.signInWithCredential()                 â”‚  â”‚
â”‚  â”‚ 5. Navigator.push(NewPasswordScreen())                 â”‚  â”‚
â”‚  â”‚                                                         â”‚  â”‚
â”‚  â”‚ Resend OTP:                                            â”‚  â”‚
â”‚  â”‚ - 60s countdown timer                                  â”‚  â”‚
â”‚  â”‚ - Re-call verifyPhoneNumber()                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NEW PASSWORD SCREEN (new_password_screen.dart)              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1. FirebaseAuth.signOut() (phone session)              â”‚  â”‚
â”‚  â”‚ 2. FirebaseAuth.sendPasswordResetEmail(email)          â”‚  â”‚
â”‚  â”‚ 3. Show success message                                â”‚  â”‚
â”‚  â”‚ 4. Navigator.pushAndRemoveUntil(                       â”‚  â”‚
â”‚  â”‚      LoginScreen(email: userEmail)                     â”‚  â”‚
â”‚  â”‚    )                                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Security Flow

```
Step 1: Phone Ownership Verification
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User has physical access to phone   â”‚
â”‚         â†“                            â”‚
â”‚ Receives SMS with OTP                â”‚
â”‚         â†“                            â”‚
â”‚ Proves phone ownership               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 2: Email Ownership Verification
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User has access to email account    â”‚
â”‚         â†“                            â”‚
â”‚ Receives password reset link         â”‚
â”‚         â†“                            â”‚
â”‚ Proves email ownership               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 3: Password Update
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Firebase validates email link        â”‚
â”‚         â†“                            â”‚
â”‚ User creates new password            â”‚
â”‚         â†“                            â”‚
â”‚ Password updated in Firebase Auth    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… Double verification (Phone + Email)
âœ… Session-based security
âœ… Time-limited reset links
```

---

## ğŸ“Š State Management

```
ForgotPasswordScreen State:
â”œâ”€â”€ _mobileController: TextEditingController
â”œâ”€â”€ _isLoading: bool
â”œâ”€â”€ _mobileError: String
â”œâ”€â”€ _lastRequestTime: DateTime?
â””â”€â”€ Methods:
    â”œâ”€â”€ _sendResetCode()
    â””â”€â”€ dispose()

PasswordResetOtpScreen State:
â”œâ”€â”€ _otpControllers: List<TextEditingController>[6]
â”œâ”€â”€ _otpFocusNodes: List<FocusNode>[6]
â”œâ”€â”€ _isLoading: bool
â”œâ”€â”€ _isResending: bool
â”œâ”€â”€ _resendCountdown: int
â”œâ”€â”€ _timer: Timer?
â”œâ”€â”€ _newVerificationId: String?
â””â”€â”€ Methods:
    â”œâ”€â”€ _startResendCountdown()
    â”œâ”€â”€ _getOtpCode()
    â”œâ”€â”€ _verifyOtp()
    â”œâ”€â”€ _resendOtp()
    â”œâ”€â”€ _buildOtpField(index)
    â””â”€â”€ dispose()

NewPasswordScreen State:
â”œâ”€â”€ _newPasswordController: TextEditingController
â”œâ”€â”€ _confirmPasswordController: TextEditingController
â”œâ”€â”€ _isLoading: bool
â”œâ”€â”€ _newPasswordVisible: bool
â”œâ”€â”€ _confirmPasswordVisible: bool
â”œâ”€â”€ _newPasswordError: String
â”œâ”€â”€ _confirmPasswordError: String
â””â”€â”€ Methods:
    â”œâ”€â”€ _resetPassword()
    â””â”€â”€ dispose()
```

---

## ğŸ¨ UI Component Hierarchy

```
ForgotPasswordScreen
â”œâ”€â”€ Scaffold
â”‚   â”œâ”€â”€ AppBar (green, "Forgot Password")
â”‚   â””â”€â”€ Body
â”‚       â”œâ”€â”€ Icon (lock_reset)
â”‚       â”œâ”€â”€ Title Text
â”‚       â”œâ”€â”€ Description Text
â”‚       â”œâ”€â”€ TextField (mobile input)
â”‚       â”œâ”€â”€ ElevatedButton (send code)
â”‚       â””â”€â”€ TextButton (back to login)

PasswordResetOtpScreen
â”œâ”€â”€ Scaffold
â”‚   â”œâ”€â”€ AppBar (green, "Enter Verification Code")
â”‚   â””â”€â”€ Body
â”‚       â”œâ”€â”€ Icon (message)
â”‚       â”œâ”€â”€ Title Text
â”‚       â”œâ”€â”€ Description Text
â”‚       â”œâ”€â”€ Row (6 OTP fields)
â”‚       â”œâ”€â”€ ElevatedButton (verify)
â”‚       â””â”€â”€ Row (resend button/countdown)

NewPasswordScreen
â”œâ”€â”€ Scaffold
â”‚   â”œâ”€â”€ AppBar (green, "Create New Password")
â”‚   â””â”€â”€ Body
â”‚       â”œâ”€â”€ Icon (lock_outline)
â”‚       â”œâ”€â”€ Title Text
â”‚       â”œâ”€â”€ Description Text
â”‚       â”œâ”€â”€ TextField (new password)
â”‚       â”œâ”€â”€ TextField (confirm password)
â”‚       â””â”€â”€ ElevatedButton (reset)
```

---

## ğŸš€ Ready to Test!

All components are connected and ready for use. Follow the flow above to test the complete forgot password feature! ğŸ‰
